import { renderBlock } from './lib.js';
import { renderToast } from './lib.js';
export function renderSearchFormBlock(dateArrival, dateOfDeparture) {
    /**
   * @param year {number} - настоящий год
   * @param month {number} - месяц
   * @returns {number} - дата последнего дня в переданном месяце месяце
   */
    // Функция возвращает последнее число переданного месяца переданного года
    function getLastDayOfMonth(year, month) {
        let date = new Date(year, month, 0);
        return date.getDate();
    }
    // Расчет месяца, который следует за текущим
    let maxDateArrival = new Date().getMonth() <= 10 ? new Date().getMonth() + 1 : 0;
    // Дефолтная дата въезда - следующий день от текущей даты
    let defaultDateArrival = String(new Date().getFullYear()) + '-' + String(new Date().getMonth()) + '-' + String(new Date().getDate() + 1);
    let maxDefaultDateArrival = String(new Date().getFullYear()) + '-' + String(maxDateArrival) + '-' + String(getLastDayOfMonth(new Date().getFullYear(), maxDateArrival));
    // Дата выезда - плюс два дня от даты въезда
    let defaultDateOfDeparture = String(new Date().getFullYear()) + '-' + String(new Date().getMonth()) + '-' + String(new Date().getDate() + 1 + 2);
    renderBlock('search-form-block', `
    <form>
      <fieldset class="search-filedset">
        <div class="row">
          <div>
            <label for="city">Город</label>
            <input id="city" type="text" disabled value="Санкт-Петербург" />
            <input type="hidden" disabled value="59.9386,30.3141" />
          </div>
          <!--<div class="providers">
            <label><input type="checkbox" name="provider" value="homy" checked /> Homy</label>
            <label><input type="checkbox" name="provider" value="flat-rent" checked /> FlatRent</label>
          </div>--!>
        </div>
        <div class="row">
          <div>
            <label for="check-in-date">Дата заезда</label>
            <input id="check-in-date" type="date" value=${defaultDateArrival} min=${defaultDateArrival}  max=${maxDefaultDateArrival} name="checkin" />
          </div>
          <div>
            <label for="check-out-date">Дата выезда</label>
            <input id="check-out-date" type="date" value=${defaultDateOfDeparture} min=${defaultDateOfDeparture}  name="checkout" />
          </div>
          <div>
            <label for="max-price">Макс. цена суток</label>
            <input id="max-price" type="text" value="" name="price" class="max-price" />
          </div>
          <div>
            <div><button class="send">Найти</button></div>
          </div>
        </div>
      </fieldset>
    </form>
    `);
    document.querySelector(".send").addEventListener('click', (e) => {
        let checkInDate = document.querySelector("#check-in-date");
        let checkOutDate = document.querySelector("#check-out-date");
        if (new Date((checkInDate.value).slice(0, 4) + '-' + (checkInDate.value).slice(5, 7) + '-' + (checkInDate.value).slice(8)) <= new Date((checkOutDate.value).slice(0, 4) + '-' + (checkOutDate.value).slice(5, 7) + '-' + (checkOutDate.value).slice(8))) {
            console.log("ok!");
        }
        else {
            renderToast({ text: 'Минимальная дата въезда, которую можно выбрать это дата сегодняшнего дня, а максимальная дата - последний день следующего месяца.', type: 'success' }, { name: 'Понял', handler: () => { console.log('Уведомление закрыто'); } });
        }
        handlerFromFormSearch();
        e.preventDefault();
    });
}
/Функция с вероятностью 50 на 50  через 1 секундк выводит либо ошибку либо пустой массив/;
/**
 *@param error {Error} - ошибка
 *@param place {Array<T>} - пустой массив
 */
const callback = (error, place) => {
    let rand = Math.floor(0 + Math.random() * (100 + 1 - 0));
    if (rand < 50) {
        setTimeout(() => console.log(error), 1000);
    }
    else {
        setTimeout(() => console.log(rand), 1000);
    }
};
// Массив данных формы поиска
let searchData = {
    town: '',
    dateArrival: '',
    dateOfDeparture: '',
    maxPrice: 0
};
// Функция поиска
/**
 *@param town {string} - город
 *@param dateArrival {string} - дата въезда
 *@param dateOfDeparture {string} - дата выезда
 *@param maxPrice {number} - максимальная цена
 *@param callback {Callback} - функция Callback
 */
export function search(town, dateArrival, dateOfDeparture, maxPrice, callback) {
    console.log(town);
    console.log(dateArrival);
    console.log(dateOfDeparture);
    console.log(maxPrice);
    callback(new Error, []);
}
// Обработчик собирает данные введенные пользователем и передаёт их в функцию поиска
export function handlerFromFormSearch() {
    const town = document.querySelector('#city');
    const dateArrival = document.querySelector('#check-in-date');
    const dateOfDeparture = document.querySelector('#check-out-date');
    const maxPrice = document.querySelector('#max-price');
    searchData.town = town.value;
    searchData.dateArrival = dateArrival.value;
    searchData.dateOfDeparture = dateOfDeparture.value;
    searchData.maxPrice = +maxPrice.value;
    search(searchData.town, searchData.dateArrival, searchData.dateOfDeparture, searchData.maxPrice, callback);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoLWZvcm0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvc2VhcmNoLWZvcm0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLFVBQVUsQ0FBQTtBQUN0QyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sVUFBVSxDQUFBO0FBRXRDLE1BQU0sVUFBVSxxQkFBcUIsQ0FBQyxXQUFvQixFQUFFLGVBQXdCO0lBRWxGOzs7O0tBSUM7SUFDRCx5RUFBeUU7SUFDekUsU0FBUyxpQkFBaUIsQ0FBQyxJQUFZLEVBQUUsS0FBYTtRQUNwRCxJQUFJLElBQUksR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3BDLE9BQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3hCLENBQUM7SUFFRCw0Q0FBNEM7SUFDNUMsSUFBSSxjQUFjLEdBQVcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFekYseURBQXlEO0lBQ3pELElBQUksa0JBQWtCLEdBQVcsTUFBTSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDakosSUFBSSxxQkFBcUIsR0FBVyxNQUFNLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsY0FBYyxDQUFDLEdBQUcsR0FB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QyxLQUFLLENBQUE7SUFDbEQsVUFBVSxDQUFDLFFBQVEsR0FBRyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUE7SUFFckMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsZUFBZSxFQUFFLFVBQVUsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUE7QUFDNUcsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlbmRlckJsb2NrIH0gZnJvbSAnLi9saWIuanMnXG5pbXBvcnQgeyByZW5kZXJUb2FzdCB9IGZyb20gJy4vbGliLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU2VhcmNoRm9ybUJsb2NrKGRhdGVBcnJpdmFsPzogc3RyaW5nLCBkYXRlT2ZEZXBhcnR1cmU/OiBzdHJpbmcpOiB2b2lkIHtcblxuICAvKipcbiAqIEBwYXJhbSB5ZWFyIHtudW1iZXJ9IC0g0L3QsNGB0YLQvtGP0YnQuNC5INCz0L7QtFxuICogQHBhcmFtIG1vbnRoIHtudW1iZXJ9IC0g0LzQtdGB0Y/RhlxuICogQHJldHVybnMge251bWJlcn0gLSDQtNCw0YLQsCDQv9C+0YHQu9C10LTQvdC10LPQviDQtNC90Y8g0LIg0L/QtdGA0LXQtNCw0L3QvdC+0Lwg0LzQtdGB0Y/RhtC1INC80LXRgdGP0YbQtVxuICovXG4gIC8vINCk0YPQvdC60YbQuNGPINCy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC/0L7RgdC70LXQtNC90LXQtSDRh9C40YHQu9C+INC/0LXRgNC10LTQsNC90L3QvtCz0L4g0LzQtdGB0Y/RhtCwINC/0LXRgNC10LTQsNC90L3QvtCz0L4g0LPQvtC00LBcbiAgZnVuY3Rpb24gZ2V0TGFzdERheU9mTW9udGgoeWVhcjogbnVtYmVyLCBtb250aDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAwKTtcbiAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG4gIH1cblxuICAvLyDQoNCw0YHRh9C10YIg0LzQtdGB0Y/RhtCwLCDQutC+0YLQvtGA0YvQuSDRgdC70LXQtNGD0LXRgiDQt9CwINGC0LXQutGD0YnQuNC8XG4gIGxldCBtYXhEYXRlQXJyaXZhbDogbnVtYmVyID0gbmV3IERhdGUoKS5nZXRNb250aCgpIDw9IDEwID8gbmV3IERhdGUoKS5nZXRNb250aCgpICsgMSA6IDA7XG5cbiAgLy8g0JTQtdGE0L7Qu9GC0L3QsNGPINC00LDRgtCwINCy0YrQtdC30LTQsCAtINGB0LvQtdC00YPRjtGJ0LjQuSDQtNC10L3RjCDQvtGCINGC0LXQutGD0YnQtdC5INC00LDRgtGLXG4gIGxldCBkZWZhdWx0RGF0ZUFycml2YWw6IHN0cmluZyA9IFN0cmluZyhuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCkpICsgJy0nICsgU3RyaW5nKG5ldyBEYXRlKCkuZ2V0TW9udGgoKSkgKyAnLScgKyBTdHJpbmcobmV3IERhdGUoKS5nZXREYXRlKCkgKyAxKTtcbiAgbGV0IG1heERlZmF1bHREYXRlQXJyaXZhbDogc3RyaW5nID0gU3RyaW5nKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSkgKyAnLScgKyBTdHJpbmcobWF4RGF0ZUFycml2YWwpICsgJy0nICsgU3RyaW5nKGdldExhc3REYXlPZk1vbnRoKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSwgbWF4RGF0ZUFycml2YWwpKTtcblxuICAvLyDQlNCw0YLQsCDQstGL0LXQt9C00LAgLSDQv9C70Y7RgSDQtNCy0LAg0LTQvdGPINC+0YIg0LTQsNGC0Ysg0LLRitC10LfQtNCwXG4gIGxldCBkZWZhdWx0RGF0ZU9mRGVwYXJ0dXJlOiBzdHJpbmcgPSBTdHJpbmcobmV3IERhdGUoKS5nZXRGdWxsWWVhcigpKSArICctJyArIFN0cmluZyhuZXcgRGF0ZSgpLmdldE1vbnRoKCkpICsgJy0nICsgU3RyaW5nKG5ldyBEYXRlKCkuZ2V0RGF0ZSgpICsgMSArIDIpO1xuXG4gIHJlbmRlckJsb2NrKFxuICAgICdzZWFyY2gtZm9ybS1ibG9jaycsXG4gICAgYFxuICAgIDxmb3JtPlxuICAgICAgPGZpZWxkc2V0IGNsYXNzPVwic2VhcmNoLWZpbGVkc2V0XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNpdHlcIj7Qk9C+0YDQvtC0PC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCBpZD1cImNpdHlcIiB0eXBlPVwidGV4dFwiIGRpc2FibGVkIHZhbHVlPVwi0KHQsNC90LrRgi3Qn9C10YLQtdGA0LHRg9GA0LNcIiAvPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBkaXNhYmxlZCB2YWx1ZT1cIjU5LjkzODYsMzAuMzE0MVwiIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPCEtLTxkaXYgY2xhc3M9XCJwcm92aWRlcnNcIj5cbiAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInByb3ZpZGVyXCIgdmFsdWU9XCJob215XCIgY2hlY2tlZCAvPiBIb215PC9sYWJlbD5cbiAgICAgICAgICAgIDxsYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cInByb3ZpZGVyXCIgdmFsdWU9XCJmbGF0LXJlbnRcIiBjaGVja2VkIC8+IEZsYXRSZW50PC9sYWJlbD5cbiAgICAgICAgICA8L2Rpdj4tLSE+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJjaGVjay1pbi1kYXRlXCI+0JTQsNGC0LAg0LfQsNC10LfQtNCwPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCBpZD1cImNoZWNrLWluLWRhdGVcIiB0eXBlPVwiZGF0ZVwiIHZhbHVlPSR7ZGVmYXVsdERhdGVBcnJpdmFsfSBtaW49JHtkZWZhdWx0RGF0ZUFycml2YWx9ICBtYXg9JHttYXhEZWZhdWx0RGF0ZUFycml2YWx9IG5hbWU9XCJjaGVja2luXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGxhYmVsIGZvcj1cImNoZWNrLW91dC1kYXRlXCI+0JTQsNGC0LAg0LLRi9C10LfQtNCwPC9sYWJlbD5cbiAgICAgICAgICAgIDxpbnB1dCBpZD1cImNoZWNrLW91dC1kYXRlXCIgdHlwZT1cImRhdGVcIiB2YWx1ZT0ke2RlZmF1bHREYXRlT2ZEZXBhcnR1cmV9IG1pbj0ke2RlZmF1bHREYXRlT2ZEZXBhcnR1cmV9ICBuYW1lPVwiY2hlY2tvdXRcIiAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwibWF4LXByaWNlXCI+0JzQsNC60YEuINGG0LXQvdCwINGB0YPRgtC+0Lo8L2xhYmVsPlxuICAgICAgICAgICAgPGlucHV0IGlkPVwibWF4LXByaWNlXCIgdHlwZT1cInRleHRcIiB2YWx1ZT1cIlwiIG5hbWU9XCJwcmljZVwiIGNsYXNzPVwibWF4LXByaWNlXCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdj48YnV0dG9uIGNsYXNzPVwic2VuZFwiPtCd0LDQudGC0Lg8L2J1dHRvbj48L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2ZpZWxkc2V0PlxuICAgIDwvZm9ybT5cbiAgICBgXG4gIClcblxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbmRcIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGxldCBjaGVja0luRGF0ZTogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2hlY2staW4tZGF0ZVwiKTtcbiAgICBsZXQgY2hlY2tPdXREYXRlOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjaGVjay1vdXQtZGF0ZVwiKTtcblxuICAgIGlmIChuZXcgRGF0ZSgoY2hlY2tJbkRhdGUudmFsdWUpLnNsaWNlKDAsIDQpICsgJy0nICsgKGNoZWNrSW5EYXRlLnZhbHVlKS5zbGljZSg1LCA3KSArICctJyArIChjaGVja0luRGF0ZS52YWx1ZSkuc2xpY2UoOCkpIDw9IG5ldyBEYXRlKChjaGVja091dERhdGUudmFsdWUpLnNsaWNlKDAsIDQpICsgJy0nICsgKGNoZWNrT3V0RGF0ZS52YWx1ZSkuc2xpY2UoNSwgNykgKyAnLScgKyAoY2hlY2tPdXREYXRlLnZhbHVlKS5zbGljZSg4KSkpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwib2shXCIpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbmRlclRvYXN0KFxuICAgICAgICB7IHRleHQ6ICfQnNC40L3QuNC80LDQu9GM0L3QsNGPINC00LDRgtCwINCy0YrQtdC30LTQsCwg0LrQvtGC0L7RgNGD0Y4g0LzQvtC20L3QviDQstGL0LHRgNCw0YLRjCDRjdGC0L4g0LTQsNGC0LAg0YHQtdCz0L7QtNC90Y/RiNC90LXQs9C+INC00L3Rjywg0LAg0LzQsNC60YHQuNC80LDQu9GM0L3QsNGPINC00LDRgtCwIC0g0L/QvtGB0LvQtdC00L3QuNC5INC00LXQvdGMINGB0LvQtdC00YPRjtGJ0LXQs9C+INC80LXRgdGP0YbQsC4nLCB0eXBlOiAnc3VjY2VzcycgfSxcbiAgICAgICAgeyBuYW1lOiAn0J/QvtC90Y/QuycsIGhhbmRsZXI6ICgpID0+IHsgY29uc29sZS5sb2coJ9Cj0LLQtdC00L7QvNC70LXQvdC40LUg0LfQsNC60YDRi9GC0L4nKSB9IH1cbiAgICAgIClcbiAgICB9XG5cbiAgICBoYW5kbGVyRnJvbUZvcm1TZWFyY2goKVxuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gIH0pXG5cbn1cblxuaW50ZXJmYWNlIFNlYXJjaEZvcm1EYXRhIHtcbiAgdG93bjogc3RyaW5nLFxuICBkYXRlQXJyaXZhbDogc3RyaW5nLFxuICBkYXRlT2ZEZXBhcnR1cmU6IHN0cmluZyxcbiAgbWF4UHJpY2U6IG51bWJlclxufVxuXG5pbnRlcmZhY2UgUGxhY2UgeyB9XG5cbmludGVyZmFjZSBDYWxsYmFjayB7XG4gIChlcnJvcjogRXJyb3IsIHBsYWNlOiBQbGFjZVtdKTogdm9pZFxufVxuXG4v0KTRg9C90LrRhtC40Y8g0YEg0LLQtdGA0L7Rj9GC0L3QvtGB0YLRjNGOIDUwINC90LAgNTAgINGH0LXRgNC10LcgMSDRgdC10LrRg9C90LTQuiDQstGL0LLQvtC00LjRgiDQu9C40LHQviDQvtGI0LjQsdC60YMg0LvQuNCx0L4g0L/Rg9GB0YLQvtC5INC80LDRgdGB0LjQsi9cbi8qKlxuICpAcGFyYW0gZXJyb3Ige0Vycm9yfSAtINC+0YjQuNCx0LrQsFxuICpAcGFyYW0gcGxhY2Uge0FycmF5PFQ+fSAtINC/0YPRgdGC0L7QuSDQvNCw0YHRgdC40LJcbiAqL1xuY29uc3QgY2FsbGJhY2s6IENhbGxiYWNrID0gKGVycm9yOiBFcnJvciwgcGxhY2U6IEFycmF5PGFueT4pID0+IHtcbiAgbGV0IHJhbmQgPSBNYXRoLmZsb29yKDAgKyBNYXRoLnJhbmRvbSgpICogKDEwMCArIDEgLSAwKSk7XG5cbiAgaWYgKHJhbmQgPCA1MCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gY29uc29sZS5sb2coZXJyb3IpLCAxMDAwKVxuICB9IGVsc2Uge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gY29uc29sZS5sb2cocmFuZCksIDEwMDApXG4gIH1cbn1cblxuLy8g0JzQsNGB0YHQuNCyINC00LDQvdC90YvRhSDRhNC+0YDQvNGLINC/0L7QuNGB0LrQsFxubGV0IHNlYXJjaERhdGE6IFNlYXJjaEZvcm1EYXRhID0ge1xuICB0b3duOiAnJyxcbiAgZGF0ZUFycml2YWw6ICcnLFxuICBkYXRlT2ZEZXBhcnR1cmU6ICcnLFxuICBtYXhQcmljZTogMFxufVxuXG4vLyDQpNGD0L3QutGG0LjRjyDQv9C+0LjRgdC60LBcbi8qKlxuICpAcGFyYW0gdG93biB7c3RyaW5nfSAtINCz0L7RgNC+0LRcbiAqQHBhcmFtIGRhdGVBcnJpdmFsIHtzdHJpbmd9IC0g0LTQsNGC0LAg0LLRitC10LfQtNCwIFxuICpAcGFyYW0gZGF0ZU9mRGVwYXJ0dXJlIHtzdHJpbmd9IC0g0LTQsNGC0LAg0LLRi9C10LfQtNCwXG4gKkBwYXJhbSBtYXhQcmljZSB7bnVtYmVyfSAtINC80LDQutGB0LjQvNCw0LvRjNC90LDRjyDRhtC10L3QsFxuICpAcGFyYW0gY2FsbGJhY2sge0NhbGxiYWNrfSAtINGE0YPQvdC60YbQuNGPIENhbGxiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZWFyY2godG93bjogc3RyaW5nLCBkYXRlQXJyaXZhbDogc3RyaW5nLCBkYXRlT2ZEZXBhcnR1cmU6IHN0cmluZywgbWF4UHJpY2U6IG51bWJlciwgY2FsbGJhY2s6IENhbGxiYWNrKTogdm9pZCB7XG4gIGNvbnNvbGUubG9nKHRvd24pXG4gIGNvbnNvbGUubG9nKGRhdGVBcnJpdmFsKVxuICBjb25zb2xlLmxvZyhkYXRlT2ZEZXBhcnR1cmUpXG4gIGNvbnNvbGUubG9nKG1heFByaWNlKVxuXG4gIGNhbGxiYWNrKG5ldyBFcnJvciwgW10pXG59XG5cbi8vINCe0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdC40YDQsNC10YIg0LTQsNC90L3Ri9C1INCy0LLQtdC00LXQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70LXQvCDQuCDQv9C10YDQtdC00LDRkdGCINC40YUg0LIg0YTRg9C90LrRhtC40Y4g0L/QvtC40YHQutCwXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlckZyb21Gb3JtU2VhcmNoKCk6IHZvaWQge1xuICBjb25zdCB0b3duOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NpdHknKVxuICBjb25zdCBkYXRlQXJyaXZhbDogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGVjay1pbi1kYXRlJylcbiAgY29uc3QgZGF0ZU9mRGVwYXJ0dXJlOiBIVE1MSW5wdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoZWNrLW91dC1kYXRlJylcbiAgY29uc3QgbWF4UHJpY2U6IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWF4LXByaWNlJylcblxuICBzZWFyY2hEYXRhLnRvd24gPSB0b3duLnZhbHVlXG4gIHNlYXJjaERhdGEuZGF0ZUFycml2YWwgPSBkYXRlQXJyaXZhbC52YWx1ZVxuICBzZWFyY2hEYXRhLmRhdGVPZkRlcGFydHVyZSA9IGRhdGVPZkRlcGFydHVyZS52YWx1ZVxuICBzZWFyY2hEYXRhLm1heFByaWNlID0gK21heFByaWNlLnZhbHVlXG5cbiAgc2VhcmNoKHNlYXJjaERhdGEudG93biwgc2VhcmNoRGF0YS5kYXRlQXJyaXZhbCwgc2VhcmNoRGF0YS5kYXRlT2ZEZXBhcnR1cmUsIHNlYXJjaERhdGEubWF4UHJpY2UsIGNhbGxiYWNrKVxufVxuIl19